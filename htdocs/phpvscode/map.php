<html>
<script></script>
<?php
$hostname = "localhost";
$username = "root";
$password = "1439";
$db = "phpserver";

$mysqli = new mysqli($hostname,$username,$password,$db);
if ($mysqli->connect_error) {
  die("Database connection failed: " . $dbconnect->connect_error);
}

$stmt = $mysqli->prepare("SELECT * FROM b");
$stmt->execute();
$result = $stmt->get_result();
//$sql = "SELECT * FROM bdinterval";
//$result = mysqli_query($dbconnect,$sql);
$firstname = [];
$number = [];
while ($row = mysqli_fetch_array($result)) {
    array_push($firstname,$row[1]);
    array_push($number,[$row[2],$row[3]]);
}
?>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>KMITL Log Analytics - Map</title>.
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <link href="index.css" media="all" rel="Stylesheet" type="text/css" />
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyChO4HEq1x-dXtFFcfCuOHdog9jl6HITdE"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
 <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
    integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
    crossorigin=""></script>
</head>



<body onload ='initalize()'>
    <div class='head_main'>
        <a href="../phpvscode/index.php"><img src="../img/header.png"></a>
    </div>
        <div class = time  style="padding-top:30px; height:120px">
            <table align="center">
                <tr valign="top">
                    <td> <label class = 'gtext'>Time</label></td>
                    <td> <input name = 'time_start'   id ='time_start'  class = 'time_start'  type = 'date'/> </td>
                    <td> <label class = 'text'> : </label> </td> 
                    <td>
                        <div style="width:200px;padding-left:20px;padding-right:20px;height: 120px">
                            <select id= 'hour_sel' class="form-control" onfocus='this.size=5;' onblur='this.size=1;' onchange='this.size=1; this.blur();'>
                                <option value = '00:00'>00:00</option>
                                <option value = '01:00'>01:00</option>
                                <option value = '02:00'>02:00</option>
                                <option value = '03:00'>03:00</option>
                                <option value = '04:00'>04:00</option>
                                <option value = '05:00'>05:00</option>
                                <option value = '06:00'>06:00</option>
                                <option value = '07:00'>07:00</option>
                                <option value = '08:00'>08:00</option>
                                <option value = '09:00'>09:00</option>
                                <option value = '10:00'>10:00</option>
                                <option value = '11:00'>11:00</option>
                                <option value = '12:00'>12:00</option>
                                <option value = '13:00'>13:00</option>
                                <option value = '14:00'>14:00</option>
                                <option value = '15:00'>15:00</option>
                                <option value = '16:00'>16:00</option>
                                <option value = '17:00'>17:00</option>
                                <option value = '18:00'>18:00</option>
                                <option value = '19:00'>19:00</option>
                                <option value = '20:00'>20:00</option>
                                <option value = '21:00'>21:00</option>
                                <option value = '22:00'>22:00</option>
                                <option value = '23:00'>23:00</option>
                            </select>
                        </div>
                </td>
                <td> <button class = 'search-bt' id = cf_button onclick = 'changedate()'>view</button></td> 
            </tr>
        </table>  
    </div>

    <div class='body_main'>
        <div id="mapid"  style=" height: 100%;"></div>
        <!-- <div id="capture"></div> -->
    </div>
    <div class='tail_main'></div>
</body>

</html>

<script>
    function initalize(){
        var today = new Date();
        var yesterday = new Date();
        today.setUTCHours(18)
        yesterday.setUTCHours(-6)
        var dateTime = today.toISOString().slice(0,10);
        document.getElementById("time_start").defaultValue = dateTime;
        document.getElementById("time_start").max = dateTime;
    }
    var  mymap = L.map('mapid').setView([13.728345,100.778075], 17);
        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(mymap);
    var a ={"type":"FeatureCollection","features":[
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77207168746,13.7275400510618,3.15887942761667],[100.772073699484,13.7273834831389,3.79105003173129],[100.772315305452,13.7273896952706,3.62542592698071],[100.772490717455,13.7273947478117,3.77824529931351],[100.772725104352,13.7274076943495,3.47046515468382],[100.772726316211,13.7275028210064,3.75973043483159],[100.772719061581,13.7276050837565,3.74587330868936],[100.772861257055,13.7276080580943,3.30321218840109],[100.772860794622,13.7277038226185,3.53696870248841],[100.772793724107,13.727697696754,3.67869681688559],[100.772786326045,13.7277835175646,3.82042493128277],[100.7724195968,13.7277654439614,3.56749562662173],[100.772415077747,13.7277972504403,3.6067339485193],[100.772292157323,13.7277925637626,3.19204476437985],[100.772290068277,13.7277556206869,3.15850278879778],[100.771928878162,13.7277458207084,3.24444504429413],[100.771885553176,13.727723707537,3.41268083755167],[100.771863386893,13.7276697890196,3.13098061888751],[100.771874669204,13.7275272816696,3.0131719299091],[100.77207168746,13.7275400510618,3.15887942761667]]]},"properties":{"id":"0D5BAABAAA13AEB38432","name":"อาคารเรียนรวมคณะวิศวกรรมศาสตร์ (ตึก 12 ชั้น)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772521956925,13.7287826469635,2.88313179477638],[100.772532045671,13.7285175527853,2.88400977225583],[100.773341918619,13.7285359578677,2.8829906652082],[100.773324752839,13.7285804847453,2.88306921073123],[100.773381077539,13.7285865865544,2.88309432922819],[100.773345139742,13.7287933587045,3.04231238968404],[100.773292697636,13.728779654138,3.08069631912026],[100.773279570399,13.7288169188782,3.20488570472339],[100.772521956925,13.7287826469635,2.88313179477638]]]},"properties":{"id":"0201DD7CC313AEB44D80","name":"KMITL Fitness Center"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775092384717,13.7294240977101,3.69075357093848],[100.77509679608,13.7292332904671,2.95435696502769],[100.775253994956,13.7292267228761,3.07789720526164],[100.775254862097,13.7290909088115,3.25238287270396],[100.775205230951,13.7290944853108,3.33962570642512],[100.775211964534,13.7289445484832,3.42686854014629],[100.775937270974,13.72895746579,3.74020100432339],[100.775933804551,13.7292320482311,4.1483174377569],[100.775936817876,13.7293790780514,3.45440836911251],[100.775799563726,13.7293777237284,3.34391719087982],[100.775799879501,13.729449278797,2.96272237374524],[100.775092384717,13.7294240977101,3.69075357093848]]]},"properties":{"id":"054811DFE613AED79DD3","name":"อาคาร ECC"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774751407848,13.7266288499088,7.48247665276759],[100.774768631887,13.7264596033421,3.08434307049413],[100.775122359185,13.726472049111,2.98669831719682],[100.775122953788,13.7264271249863,2.93787594054817],[100.775243988498,13.7264323546632,2.91346475222384],[100.775247023458,13.7264786478651,2.88905356389952],[100.775747506115,13.7264863448867,2.82626438341831],[100.775743330691,13.7266544210472,3.90436524285414],[100.774751407848,13.7266288499088,7.48247665276759]]]},"properties":{"id":"0975C3E95113AED8A582","name":"ตึกใหม่ข้างโรงอาหาร (HM)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772348536266,13.7266009419217,3.13648798515277],[100.772368762353,13.7263647229994,2.88908617013045],[100.772709037234,13.7263681448317,4.32102387361556],[100.772716758103,13.7262617521385,3.56503502539302],[100.772809814372,13.7262687951119,3.78952959734028],[100.772776422958,13.726613308578,3.56273123793927],[100.772348536266,13.7266009419217,3.13648798515277]]]},"properties":{"id":"095914748013AEDA6C40","name":"อาคารโรงปฏิบัติการวิศวกรรมเกษตร"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772796387373,13.7263872098532,4.95094257109179],[100.7738746637,13.7264269033176,3.66765254225258],[100.773863113353,13.7266285093623,3.9193497150369],[100.77278035993,13.7265927984537,3.65559982136226],[100.772796387373,13.7263872098532,4.95094257109179]]]},"properties":{"id":"00E00441D613AEDAEAF1","name":"อาคารโรงปฏิบัติการวิศวกรรมเคมี"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773379860271,13.7269729758124,2.36529176284327],[100.773385548427,13.7266893987677,2.94231363457344],[100.773837872586,13.7267105002961,3.89635020717866],[100.773830888753,13.7269895478959,3.02788385310213],[100.773379860271,13.7269729758124,2.36529176284327]]]},"properties":{"id":"06E009EEB113AEDB637F","name":"อาคารยิมเนเซียม 2 ชั้น"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773105810614,13.7274289419528,3.23467492225385],[100.773231790647,13.727442270852,3.25392191962395],[100.77322175049,13.727589195812,3.4864102806424],[100.773628971093,13.7275853028145,2.90228071598766],[100.7736243312,13.7277472368627,3.20993067476919],[100.773565496003,13.7278576356298,3.60064419272814],[100.773141805697,13.7278313901264,3.99458458168449],[100.773142797004,13.7276827991122,3.87532497696666],[100.773089929984,13.727674558118,3.73519999306192],[100.773094462636,13.7276225880463,3.6100687253599],[100.773096671747,13.7275675690904,3.48493745765788],[100.773105810614,13.7274289419528,3.23467492225385]]]},"properties":{"id":"0C7E27429213AEE0034E","name":"อาคารภาควิชาวิศวกรรมเครื่องกล"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773664061858,13.7278124288003,3.29242815814604],[100.773665451597,13.7276858266624,2.97046587331924],[100.77372722508,13.7276891516903,2.89280840289892],[100.773766728098,13.7274996901138,2.64493650728706],[100.773801642251,13.7274676734743,2.68456737148081],[100.773910830105,13.7274770527952,2.84232746841893],[100.773905025607,13.7275120991921,2.80031101472779],[100.774297387756,13.7275353157465,3.40339574186127],[100.77429519661,13.7278245753076,3.32640020664631],[100.773664061858,13.7278124288003,3.29242815814604]]]},"properties":{"id":"081FD9E08013AEE12A8D","name":"อาคารภาควิชาวัดคุม"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773705734346,13.7247946471715,3.35265271688716],[100.773714292902,13.7250357904751,3.70156952131999],[100.773090568308,13.7250432087637,3.3840744768649],[100.773087044489,13.7248029576154,4.36569913775181],[100.773705734346,13.7247946471715,3.35265271688716]]]},"properties":{"id":"0B56B6F8BB13AEE7C2B1","name":"Fine ARts Buildings"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.771855606532,13.7269810095927,3.33554672903819],[100.771860696014,13.7267124769921,3.45540865992179],[100.772048616395,13.7267094083712,3.35645600900886],[100.772051023187,13.7266795163318,3.3526757742414],[100.772349685379,13.7266800979585,3.11088299626474],[100.772333966187,13.726981867226,3.33639570198153],[100.771855606532,13.7269810095927,3.33554672903819]]]},"properties":{"id":"08D081FA4313AEE8EC17","name":"C Food Court"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.778150788468,13.7271753321572,2.8021179394685],[100.778405890544,13.7271658951278,3.50936122220647],[100.778396558263,13.7273209269897,3.46418132610818],[100.778553355556,13.7273407305327,3.69527523424874],[100.778545457335,13.7274684995235,3.77222766371235],[100.778791305772,13.7274604685275,4.52596898787724],[100.778800434764,13.7274098330985,4.64571170351102],[100.778956603598,13.7274215323819,4.77461424064627],[100.778949480697,13.7274677115744,4.62767724089336],[100.779048556646,13.7274668101834,4.53195378383048],[100.779040873875,13.7274846233098,4.25301836389875],[100.779036009516,13.7279861392137,2.92112846704282],[100.778665468279,13.7279744532677,3.73047844276226],[100.778563351412,13.7279561254198,3.71653453501404],[100.7785700123,13.7280709203657,3.70259062726581],[100.778339947531,13.7280304503436,4.3629853413381],[100.778171203306,13.7280126770389,3.77420260058475],[100.77817470745,13.7278903374915,3.1854198598314],[100.778150788468,13.7271753321572,2.8021179394685]]]},"properties":{"id":"01269109C113AEEA4F75","name":"อาคารสำนักหอสมุดกลาง"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776647698823,13.7291715897286,6.24402489092634],[100.776642676725,13.7292762832775,6.52176487637547],[100.776641037702,13.7293931374019,6.3332208476416],[100.77641138057,13.729392617329,4.76363615316787],[100.776406387118,13.7292772125128,4.77106979805921],[100.776407873354,13.7291670056479,4.55353521418258],[100.77654298661,13.7291708176547,4.72964623765833],[100.776647698823,13.7291715897286,6.24402489092634]]]},"properties":{"id":"0F4454C57A13AF6D29BF","name":"อาคาร Automation"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774575377957,13.7305202195622,2.95786680390026],[100.77500675478,13.7305260670475,2.74350303982218],[100.774988890665,13.7312817527601,2.87093366500648],[100.774844902138,13.7312761265237,2.75264276907245],[100.774852686688,13.7311967570812,3.07422186667293],[100.774762425536,13.7312073059308,2.86414886699351],[100.774757034575,13.731250037386,2.73450091625092],[100.774693775141,13.7312466248717,2.73447633814965],[100.774702914518,13.7312007995645,2.87583989765456],[100.774583697759,13.7311880274746,2.75466125165185],[100.774575377957,13.7305202195622,2.95786680390026]]]},"properties":{"id":"0FB1D3604713AF6E4247","name":"KMITL Alumi Assocaition"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775115231947,13.7298122243915,3.39770347822105],[100.775489452439,13.7298101043428,3.69691153966077],[100.775482760094,13.7301186590546,2.63855629164279],[100.775112399222,13.7301151644861,5.90001643687023],[100.775115231947,13.7298122243915,3.39770347822105]]]},"properties":{"id":"05D724FC0513AF6F9AEC","name":"College of Advanced Manufacturing Innovation"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777406202675,13.7300975920555,3.1151753535575],[100.776876411301,13.7300868190222,3.05863844261447],[100.7768879991,13.730270747724,3.04450421487871],[100.777584535846,13.7303025541145,3.03743710101084],[100.777584529374,13.7304103794734,3.03036998714296],[100.776881495155,13.7303892345768,3.00210153167144],[100.776078145318,13.7303684605707,2.94556462072842],[100.77609039296,13.730252628268,2.93143039299266],[100.776798219945,13.7302672686572,2.92436327912478],[100.776792886362,13.7300844693772,2.9172961652569],[100.776312539025,13.7300668695762,2.88902770978539],[100.776320376748,13.7297897319552,2.76074432747327],[100.776775011947,13.7297970925911,3.66172525741533],[100.776771578527,13.7298970514503,3.7372438869705],[100.776897324755,13.7299000727231,3.6762035966941],[100.776902721357,13.7298014251864,3.67276767602964],[100.777412324971,13.7298160955949,3.13209369536966],[100.777406202675,13.7300975920555,3.1151753535575]]]},"properties":{"id":"0272AD484713AF717B5E","name":"KMITL Sirindhorn Building (ตึกพระเทพ)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777650221581,13.7295493699958,2.91493932088448],[100.777157117547,13.7295458862801,4.17152793476517],[100.777176415471,13.7293471199631,4.30368653133821],[100.777639703725,13.7293498340725,2.92374371904909],[100.777650221581,13.7295493699958,2.91493932088448]]]},"properties":{"id":"01460E152813AF750088","name":"KMITL Hospital"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777334051319,13.7307106120844,3.81626499356799],[100.778108569886,13.7307177533855,2.6206744865631],[100.778109813543,13.7309691142864,2.34537004891954],[100.777519216731,13.7309813464749,3.95056479488364],[100.777510820285,13.7310962520281,4.02691102770345],[100.777397691476,13.7310888227787,3.7200358647765],[100.777397252519,13.730972206734,3.81627982757109],[100.777307017965,13.730949108856,3.74372204721128],[100.777334051319,13.7307106120844,3.81626499356799]]]},"properties":{"id":"09118DC64613AF777634","name":"ตึกอธิการ"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77518095362,13.7303208064194,2.9314896362572],[100.775929865828,13.7303383056868,3.1981221589733],[100.775916117084,13.7306292012513,2.74462842091609],[100.775155735089,13.7306005703135,2.73452546040064],[100.77518095362,13.7303208064194,2.9314896362572]]]},"properties":{"id":"05A1A66B4E13AF79F51C","name":"KMITL Swimming Pool"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775479188712,13.727423749793,3.81629636339622],[100.775701558522,13.7274300275147,3.71911211351881],[100.775694962729,13.7275958241324,3.31859787750402],[100.775663848232,13.7275954487568,3.32039116786347],[100.775650834653,13.7277966877587,2.78826571932692],[100.775274796351,13.7277859540302,3.02769710395241],[100.775279303218,13.7276477439209,3.36584157727245],[100.775000694247,13.7276340852972,4.18022774231509],[100.775002181392,13.7275779004811,4.35815426754479],[100.774911493619,13.7275753574222,4.65310756031434],[100.774912623033,13.7274627909885,4.68847426681652],[100.774981990286,13.7274683748029,4.66328076095208],[100.774998926626,13.7273380913925,4.70728432739439],[100.775283108266,13.7273552416667,3.72676372602073],[100.775278602778,13.7272738002849,3.8713674344129],[100.775485589201,13.7272793434335,3.97081143656871],[100.775479188712,13.727423749793,3.81629636339622]]]},"properties":{"id":"0594A06D6013AF7B5443","name":"Biomedical engineering"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775848876214,13.727356248947,3.75777280901164],[100.77640406141,13.7273649210429,3.16611177652881],[100.776401557201,13.7275846343796,3.47392674697277],[100.775850861499,13.7275733209145,3.37117486256439],[100.775848876214,13.727356248947,3.75777280901164]]]},"properties":{"id":"0FE607B19513AF7C8635","name":"อาคารภาควิชาโทรคมนาคม"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774870118301,13.7258599739507,3.67775709283283],[100.774816799004,13.7258573012816,3.60292753568324],[100.774818232736,13.7257913857886,3.50721943038478],[100.774782616985,13.7257892684885,3.50722040366287],[100.774793982254,13.7255769325854,3.30745063202873],[100.77484975478,13.725557045231,3.41894358786617],[100.774845242035,13.7254800628206,3.3526853584843],[100.775157792667,13.7254944103806,6.08326325809027],[100.775150528397,13.7255187291172,6.02114951280407],[100.77523457881,13.7255389436195,6.77881248989286],[100.775374313668,13.7255252175517,6.75534710887465],[100.775375892182,13.7256112121492,6.73188172785643],[100.775473616294,13.725619082891,6.68495096582001],[100.775459169442,13.7258259241707,6.59108944174715],[100.775360500021,13.7258112255453,6.40336639360144],[100.77535951094,13.7260080277435,5.10548170177494],[100.775155032001,13.7259980845761,4.81950673253199],[100.775150871862,13.7258848199437,4.53353176328904],[100.775128284676,13.7258848715182,4.43705542893387],[100.775094386984,13.7258826579239,4.349452797783],[100.775061321627,13.7258725017936,4.26185016663213],[100.774870118301,13.7258599739507,3.67775709283283]]]},"properties":{"id":"087718267613AF7FC453","name":"ฺีConvention Hall of Architecture"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774845875812,13.7250041206151,3.71086121351587],[100.775402525018,13.7250224366886,4.60799286960468],[100.775374791168,13.7254136952304,5.71127768178431],[100.774835345601,13.7253897356856,3.44539149217311],[100.774845875812,13.7250041206151,3.71086121351587]]]},"properties":{"id":"05974336E113AF819BB2","name":"อาคารเรียนภาควิชาสถาปัตยกรรม"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.7802697487,13.7261648574207,3.04736063464089],[100.780509799769,13.7258838008155,3.53308499326385],[100.780625399798,13.7259024694349,4.33522949839073],[100.78077747527,13.7260949756561,3.5072027148993],[100.780975259199,13.7261018091919,3.82835734017459],[100.78132062064,13.7258293601795,3.09880608205752],[100.781396447009,13.7258622180671,3.39014786800339],[100.781599039656,13.7260770692415,3.1379736899256],[100.781590337823,13.7261707668135,2.95282146604588],[100.781306227441,13.7264088733627,2.90459615731491],[100.78131834767,13.7266934129955,3.31098919958099],[100.781584211866,13.7269644895092,3.04523968624869],[100.781583382169,13.7270730220787,3.10976142198966],[100.781356233324,13.7272596514931,4.7956439439765],[100.781247213797,13.7272613638492,4.54204763401026],[100.780938190928,13.7269902720523,3.88533483947102],[100.780735501527,13.7269987061105,3.87943653370621],[100.780546175165,13.7271713415354,3.80581443130666],[100.780290304639,13.7269123731524,2.88909036314831],[100.780457995119,13.7267015060217,3.04361522568771],[100.780452585362,13.7266636622127,3.08322175227042],[100.780139358294,13.7266653134002,2.42061012571717],[100.780168687442,13.7263716415335,3.19811619481566],[100.780430993374,13.7263462017429,3.19815171522229],[100.7802697487,13.7261648574207,3.04736063464089]]]},"properties":{"id":"0C0667E09E13AF83FB55","name":"Building of Faculty of Agricultural Technology"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.778743042053,13.726586729466,3.50129197861902],[100.778751861438,13.7264674218083,3.48190675453926],[100.778474281689,13.7264685877595,3.7123568943892],[100.778458667021,13.7263238687871,3.7708381720064],[100.778739325947,13.7263397897182,3.31374268537017],[100.778756958031,13.726120888434,2.88310203623266],[100.779229925491,13.7261208752748,2.88308956044844],[100.779260709307,13.7260386939162,2.88312803181163],[100.779386202488,13.7260297879422,2.88308882624592],[100.779373519495,13.7261173395682,2.88305294793324],[100.78007408182,13.7261263963351,2.9952172237535],[100.780014948146,13.7265958238641,2.60907212323437],[100.779882879781,13.7265933284324,2.85541229414636],[100.779868554277,13.7269630017796,2.88307896190264],[100.779826824076,13.7269698452801,2.88308848390101],[100.779820352141,13.7270659679714,2.88296696135964],[100.779045527897,13.7270613333221,3.61901462585254],[100.779037785014,13.7271079765227,3.62777244530398],[100.778883763114,13.7271109592314,4.77661250365611],[100.778867293549,13.727056391602,4.66232328447658],[100.778582710792,13.7270521680701,4.03133001017436],[100.778505347166,13.7269700529682,3.73948088038547],[100.778465917829,13.7269536342159,3.66256510021791],[100.778496111388,13.7266334699046,3.50112312052759],[100.778743042053,13.726586729466,3.50129197861902]]]},"properties":{"id":"0B490B99F613AF871B6F","name":"Meeting Hall"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774456640919,13.7297060734069,4.49126214553516],[100.77497158348,13.7297304280372,3.02754591199018],[100.774964466534,13.7298591201988,3.22055181957834],[100.774453505498,13.7298547447261,3.68581172451698],[100.774456640919,13.7297060734069,4.49126214553516]]]},"properties":{"id":"0E7B6DEC5513B0FE1484","name":"หอพักชายใหม่ 7"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774451482631,13.7294326410815,3.31983788897231],[100.77445006969,13.7294314544826,4.11751776233912],[100.774975752742,13.7294441776394,3.16880088874262],[100.774966550705,13.7294931312852,3.10796780696841],[100.774986760715,13.7295879140265,3.0471347251942],[100.774471009194,13.7295817872998,4.6768580668118],[100.774451482631,13.7294326410815,3.31983788897231]]]},"properties":{"id":"0783A5051913B0FE8D6A","name":"หอพักหญิงใหม่ 8"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775155276759,13.7285815651861,3.45251127185359],[100.775359190868,13.7285962522844,3.56346490855026],[100.775357089061,13.7288985457293,3.3571958078767],[100.775142951902,13.7288984844563,3.28563669006587],[100.775155276759,13.7285815651861,3.45251127185359]]]},"properties":{"id":"06E6B3252E13B0FFDF6C","name":"โรงอาหารข้าง ECC"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777177295078,13.72717935002,3.5201962802439],[100.777521246683,13.7271879175012,3.52067560697538],[100.777507757085,13.7275193939106,3.55780949225687],[100.777163065522,13.7275171104672,3.52040034327537],[100.777177295078,13.72717935002,3.5201962802439]]]},"properties":{"id":"023EDCC86413B1038C56","name":"หอประชุมใหญ่"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775468036779,13.7270652705952,5.51274218946315],[100.775433373158,13.7270174406997,7.5518643072139],[100.775188409923,13.7270091324664,8.57142536608927],[100.775195504091,13.7268877526677,9.08120589552696],[100.775428659083,13.7268970000046,9.3360961602458],[100.775433778149,13.7268372198501,9.46354129260523],[100.775471170825,13.7268371941207,9.59098642496465],[100.775897425434,13.7268572740728,4.24795737861843],[100.775878895897,13.727084679434,4.82708502097813],[100.775468036779,13.7270652705952,5.51274218946315]]]},"properties":{"id":"0A100BEE1F13B105BE09","name":"อาคารโรงอาหารคณะวิศกรรมศาตร์"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774098931532,13.7270240805804,3.36196280941475],[100.774111579949,13.7268389790912,3.81606339061008],[100.774573109951,13.7268457328128,3.63598663376634],[100.774567414952,13.7270291500193,3.07000413632713],[100.774098931532,13.7270240805804,3.36196280941475]]]},"properties":{"id":"00F67C237013B10AD15C","name":"อาคารภาควิศวกรรมโยธา"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777321446261,13.729094316624,4.049218659323],[100.77733547235,13.7290402399401,4.0544343604547],[100.777242636921,13.7290398944072,4.58655308941136],[100.777247091188,13.7289480647406,4.19585913462511],[100.777087195655,13.7289330598695,5.53005132506607],[100.777085849635,13.72882393121,5.07471984415279],[100.777316251571,13.7288237115663,3.51076965463983],[100.777316006108,13.7289268864801,3.71181206802222],[100.7775604058,13.728928979558,2.93453479991175],[100.777550557125,13.7290958728028,3.13754597947022],[100.777321446261,13.729094316624,4.049218659323]]]},"properties":{"id":"0C1748624913B1126DA8","name":"นาโนตึกแดง"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780199740247,13.731366130313,2.6620679970027],[100.780205405969,13.7313123115982,2.82738237155969],[100.779818584218,13.7313241221139,3.08490717427484],[100.779825004133,13.7311274462074,3.38325195360266],[100.780017659711,13.7311246479908,3.3592320471228],[100.78001966888,13.7309713402176,3.5343369641697],[100.780421898965,13.7309519082383,3.76847607981891],[100.780429205517,13.7310828876668,3.70783545883734],[100.780581885699,13.7310763184659,3.84134858266652],[100.780573975642,13.7313475147268,3.0586389331438],[100.780199740247,13.731366130313,2.6620679970027]]]},"properties":{"id":"02382D31F713B116F5D3","name":"Administration and Management"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780760711117,13.7311728400438,4.41752692926432],[100.780760796054,13.7307580362704,3.57284125189165],[100.781491239625,13.7307739044486,3.74845544943522],[100.78147625134,13.7310104400847,4.08384179691934],[100.781711948161,13.7310137245025,3.51491560996984],[100.781699362759,13.7311737841158,3.64934008990744],[100.781493778833,13.7311711322364,3.69735176736725],[100.781494066849,13.7313822134291,3.74536344482705],[100.781108017646,13.7313903827419,3.84138679974666],[100.781095754174,13.7311787868685,4.03343350958588],[100.780760711117,13.7311728400438,4.41752692926432]]]},"properties":{"id":"0122FEA98B13B118C104","name":"อาคารเรียนรวม คณะเทคโนโลยีสารสนเทศ"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776130768868,13.7270368075997,3.5205924270642],[100.776132794957,13.726889239579,3.52052552268285],[100.776207486879,13.7268914422447,3.38865683920131],[100.776209327935,13.7268641396527,3.32272249746054],[100.776256229393,13.7268630834831,3.28975532659016],[100.776254610395,13.7268909770167,3.27327174115497],[100.776347845667,13.7268921327739,3.26502994843737],[100.776352271486,13.7268287587448,3.26090905207858],[100.776462648413,13.7268361978533,3.25884860389918],[100.776466235986,13.7268924528336,3.25781837980948],[100.776545919411,13.7268957242441,3.25730326776463],[100.776550234491,13.7268709284048,3.2570457117422],[100.776597334743,13.7268714362538,3.25691693373099],[100.776594440422,13.7268965742207,3.25685254472538],[100.776677070517,13.7269028623786,3.25678815571978],[100.776691023973,13.7269284148814,2.97383173918036],[100.776684637808,13.7270641378374,3.24721208312228],[100.776130768868,13.7270368075997,3.5205924270642]]]},"properties":{"id":"0FA230591213B1217BF8","name":"อาคารคณะวิศกรรมศาสตร์ 6 ชั้น (ตึก A)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774309585415,13.7287872901143,4.09160695193102],[100.77415854804,13.7287856303802,3.78632490237119],[100.774160917737,13.7288904478238,3.76152506203377],[100.774309688715,13.7288886677231,4.523489249285],[100.774310800146,13.7289691688746,4.32059604432972],[100.774071338002,13.7289638908995,3.43044847201771],[100.774070812361,13.7287077898123,3.6617329205657],[100.774309353096,13.728715414928,3.85578296316096],[100.774309585415,13.7287872901143,4.09160695193102]]]},"properties":{"id":"00EBC1333213B3AB0B93","name":"อาคารหอพัก-1"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773649041605,13.7287027108948,3.35953726600265],[100.773879314843,13.7287037749027,3.59380210569898],[100.773876612813,13.7289630852655,3.54479210423324],[100.773635820993,13.7289577532656,3.6830368690491],[100.773637639653,13.7288755339724,3.39691411856121],[100.773793020832,13.7288810930213,3.66175481366432],[100.773792962526,13.7287795093351,3.62888746975697],[100.773645760818,13.7287768300066,3.19149252242596],[100.773649041605,13.7287027108948,3.35953726600265]]]},"properties":{"id":"0E031AFD7C13B3AC749E","name":"อาคารหอพัก-2"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774309238864,13.7291299694843,3.21899322363214],[100.77414177464,13.7291266627459,3.42412492011504],[100.774134106349,13.7292316703515,3.31053347484338],[100.774299055566,13.7292373673333,2.85925812898935],[100.774296986591,13.7293056262351,2.86943818784252],[100.774131392796,13.7292957936823,3.29950796410673],[100.774128864928,13.7294147852887,3.56052275817743],[100.774294784386,13.7294180722253,3.39804512429716],[100.774292352945,13.7294929544532,3.95360039834432],[100.774053845914,13.7294821201634,3.65313760177578],[100.774057936282,13.7290480732509,3.43000636327094],[100.774302957286,13.7290516407936,3.51628277852407],[100.774309238864,13.7291299694843,3.21899322363214]]]},"properties":{"id":"0CE27B559113B3AE0347","name":"อาคารหอพัก-4"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773866701467,13.7290404129234,3.50719338104917],[100.773857478399,13.7294837119441,3.21761169356737],[100.773618337278,13.7294750327906,3.07355399984684],[100.773625428279,13.7294133960421,3.10489069984569],[100.773784100829,13.7294124823868,3.19812685419134],[100.77378580375,13.7292898212661,3.45061796302307],[100.773621342675,13.7292892666065,3.34038590593752],[100.773629242402,13.7292222013555,3.49029011231569],[100.773787450982,13.7292299102277,3.50721660674657],[100.773791657979,13.7291067828579,3.60650542197308],[100.77363038833,13.7291026655872,3.92700459396198],[100.773628000742,13.729035906931,3.86743870258841],[100.773866701467,13.7290404129234,3.50719338104917]]]},"properties":{"id":"0CAE15FB7513B3AF4BFC","name":"อาคารหอพัก-3"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774284929952,13.7296422633746,3.56892837403176],[100.774126054582,13.7296394871708,3.51192083609124],[100.774122878312,13.7297535936551,3.2325882026943],[100.774284813103,13.7297558176089,3.18640748387893],[100.774282858098,13.7298260328861,3.34737515035169],[100.774115670207,13.7298222421477,3.31179861895512],[100.774112673713,13.7299430814079,3.48502870813818],[100.774274669244,13.7299458508916,3.35263309429922],[100.774274661629,13.7300156240029,3.35310087467048],[100.774038670429,13.7300078864984,3.69824974470368],[100.77405097916,13.7295644689634,3.56647172250138],[100.774289744247,13.7295678162877,4.47938576339701],[100.774284929952,13.7296422633746,3.56892837403176]]]},"properties":{"id":"0313980BEF13B3B018F8","name":"อาคารหอพัก-5"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773860201393,13.7295653655183,3.24609799445921],[100.773840014848,13.7300006713056,3.73137615175758],[100.77360520162,13.7299926693874,3.35747645148458],[100.773607248736,13.7299281627071,3.24687937691673],[100.773758519417,13.7299273998919,3.50546174814016],[100.77376700281,13.729819612315,3.35269466970006],[100.773607669642,13.729812709951,2.95598813243673],[100.773610363211,13.7297419557616,2.90445567848501],[100.773765216658,13.7297445707232,3.2104975144799],[100.773773146218,13.7296296974255,3.09385093935572],[100.773608408422,13.7296303179669,2.88905635500081],[100.773613486139,13.7295586984088,2.89151743579533],[100.773860201393,13.7295653655183,3.24609799445921]]]},"properties":{"id":"0B876816B113B3B0FF3B","name":"อาคารหอพัก-6"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773335930812,13.7256376660626,4.48003082326162],[100.773437963401,13.7256430857306,3.52788199284546],[100.773441928099,13.7256053582368,3.67118706249576],[100.77430173406,13.7256351805411,3.81622944769768],[100.774295176386,13.7256661315166,3.81623479789792],[100.774410195855,13.7256692824324,3.81629949967172],[100.774406524759,13.725752721395,3.81233563646891],[100.774368675923,13.7257543352347,3.77874773432659],[100.774367051496,13.7258946665349,3.57016511200366],[100.773953271233,13.7258825897665,3.14316458802693],[100.773952445292,13.7258919936817,3.12735615529916],[100.773951432599,13.7259119014907,3.11154772257138],[100.773766526848,13.7259083502825,3.2460396614325],[100.773762902108,13.7258699509754,3.19815991452441],[100.77336352749,13.7258651653331,3.19812859703817],[100.773367797966,13.7257206420234,3.47425574043361],[100.773328077142,13.7257240233302,4.03482276150893],[100.773335930812,13.7256376660626,4.48003082326162]]]},"properties":{"id":"0BD491BD7913B3B47155","name":"อาคารบูรณาการ คณะสถาปัตยกรรมศาสตร์"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.781423154332,13.7296504607017,2.78851975622772],[100.78206567317,13.7296531619736,3.6963220075751],[100.78207326231,13.7290701832071,3.12460918962445],[100.782332694052,13.7290712981008,3.35266978037614],[100.782326728988,13.7295041060988,4.17437089848019],[100.782170237688,13.7295204287572,3.8865647871306],[100.782163974775,13.7295881574684,3.9209804424903],[100.782213289112,13.7295925681038,4.0912275559624],[100.782208712473,13.7296355231916,4.07598237539699],[100.782414367319,13.7296364262351,4.09711210427153],[100.782404308436,13.7298221283963,3.47875111674732],[100.781428549546,13.7298254721878,3.33046176122357],[100.781423154332,13.7296504607017,2.78851975622772]]]},"properties":{"id":"0312E1EF7813B3BA931C","name":"อาคาร บุณณาค"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.779275041993,13.7296520270512,3.6421691339065],[100.779549178044,13.7296593806986,3.35262937518858],[100.779543470738,13.7299251313765,3.31400016304953],[100.779482609129,13.7299222841357,3.27537095091047],[100.779478040179,13.7299931907005,3.19811252663236],[100.779212940888,13.7299866355046,3.13351458166019],[100.779194933279,13.7299668117121,3.06891663668803],[100.779200590094,13.7297094206239,3.21222976099265],[100.779276270927,13.7297117044677,3.35554288529726],[100.779275041993,13.7296520270512,3.6421691339065]]]},"properties":{"id":"07E0391FEC13B3C0CA5B","name":"อาคารจุฬาภรณ์ 1 (ห้องประชุม)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780016710327,13.7292518339486,2.96819511790559],[100.780262251339,13.7292454468221,3.38679587418446],[100.780238261664,13.7298640141499,3.83854272234968],[100.779599971426,13.7298582904411,3.19818462560263],[100.779611046989,13.729613539066,3.19588396452185],[100.779817381588,13.729618120257,3.13976003153211],[100.779968687909,13.7294551491498,3.08363609854237],[100.780008224213,13.7294593872502,2.9713882325629],[100.780016710327,13.7292518339486,2.96819511790559]]]},"properties":{"id":"029518C92613B3C177DB","name":"อาคารจุฬาภรณ์ 1"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775867067571,13.7311392098017,2.12489786276468],[100.775870429806,13.7308327822811,2.22263999762844],[100.776701168445,13.7308452799578,3.03368314055229],[100.776688217204,13.731183455219,2.64858411735251],[100.775867067571,13.7311392098017,2.12489786276468]]]},"properties":{"id":"0B7FD78212140F99E864","name":"KMIDS"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775402300817,13.731146649672,3.01725685164861],[100.775307776557,13.7311468380898,2.88905497006003],[100.775315009595,13.7309476531281,3.0114742641228],[100.775416567113,13.7309493539576,3.04358297170422],[100.775416656016,13.7308419764407,3.19806441302568],[100.775616063835,13.7308490163687,3.01104845212557],[100.775608942587,13.7309769738858,3.1086279575948],[100.775705140866,13.730973644761,2.97694768193824],[100.775697955298,13.731128982922,3.27176856786164],[100.775619630591,13.7311272431714,3.27924430986002],[100.775617850963,13.7312672641925,3.30369130293531],[100.775400420618,13.7312576816692,2.85799981480008],[100.775402300817,13.731146649672,3.01725685164861]]]},"properties":{"id":"0D2CEE2ACC140F9A89B6","name":"Medicine Department"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776800978205,13.7287086572089,4.06097850131144],[100.776928077261,13.7287143289183,4.54263788615196],[100.776928636483,13.7286520965531,3.63247859008258],[100.777045181436,13.7286548819344,3.39899709637574],[100.777034541486,13.7288917916047,5.79735720627335],[100.776932912608,13.7288860938729,6.10203036852812],[100.776927390068,13.7294916487991,5.66314304635709],[100.776779936657,13.7294929894054,4.5879003736677],[100.776791401924,13.7288214953932,4.98065349066269],[100.776690059135,13.7288216184672,3.86252809867679],[100.776693128488,13.7286435206039,3.11491343706512],[100.776806584382,13.7286435625208,3.33532690116496],[100.776800978205,13.7287086572089,4.06097850131144]]]},"properties":{"id":"08B9431A0A140F9B53E4","name":"Plaza Avenue"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780924298637,13.7300491014539,3.67580327666102],[100.780917470555,13.7303077099929,3.31517717279773],[100.78039633258,13.730300907255,3.37677313413573],[100.780323939259,13.7302571353543,3.50140219246109],[100.780334654412,13.729968236762,4.07280842498154],[100.780389782382,13.7299649576743,4.00886274962954],[100.780386219799,13.7298412142428,3.80375125149647],[100.780610335362,13.7298481973192,3.50116869484039],[100.780758710116,13.7298615570638,3.55165239071405],[100.780755267421,13.7300489794148,3.7762625578259],[100.780924298637,13.7300491014539,3.67580327666102]]]},"properties":{"id":"073050A895140F9D6A1A","name":"Industrial Education and Technology Department"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780429912553,13.7297680032136,3.93691430077438],[100.78043749604,13.729396039809,3.90830072113683],[100.780748490339,13.7294071390521,3.70859731348836],[100.780767604068,13.7292376665009,3.43040170515631],[100.78126186499,13.7292524214231,2.64006462796069],[100.781241505744,13.7297829133705,3.71977913438515],[100.780429912553,13.7297680032136,3.93691430077438]]]},"properties":{"id":"0AFD162160140F9EC74A","name":"อาคารปฏิบัติการพิเศษจอมไตรณะครุศาสตร์อุตสาหกรรมและเทคโนโลยี"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77836248141,13.7291105342701,2.94633613495237],[100.778371796321,13.7288598469716,2.93026993489597],[100.778530999715,13.7288644830584,3.36747043031672],[100.778532219979,13.7289063661056,3.43011287780745],[100.778734779772,13.7289086350512,4.43978678537815],[100.778733640777,13.7289954012312,4.27506168544082],[100.77849725516,13.7289912427427,3.41258137079348],[100.77849491007,13.7291236657945,3.39845743771936],[100.77836248141,13.7291105342701,2.94633613495237]]]},"properties":{"id":"0074416C80140FA0886A","name":"อาคารกิจกรรมนักศึกษา"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780802536206,13.7276863059773,3.00768976560507],[100.780809889963,13.7273650638663,3.87492922341861],[100.781139891361,13.7273684604922,4.04640006434128],[100.781125753313,13.7277030403669,3.6962770472197],[100.780802536206,13.7276863059773,3.00768976560507]]]},"properties":{"id":"0A1D7EFEB3140FA37146","name":"Food Industry Department"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.771048476126,13.725722596068,6.21894926629829],[100.771053423639,13.7255141846148,5.17548646192617],[100.771747125512,13.7255257622935,3.40848683227416],[100.771733653304,13.7257337976325,3.6655977343316],[100.771048476126,13.725722596068,6.21894926629829]]]},"properties":{"id":"02DEC5123F140FA46859","name":"คอนโดพนักงานเจ้าหน้าที่"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772062535544,13.7273889275443,3.45394824764768],[100.77206011516,13.727292619632,3.55719322756041],[100.772122122459,13.7272957565483,3.49722594526493],[100.772129188275,13.7271141691074,3.66177299472553],[100.772697459534,13.7271358479228,3.23923393086717],[100.77268575082,13.7273092847355,3.6475997894477],[100.772741324575,13.7273173894971,3.71141066012452],[100.772735694942,13.7274025425643,3.40495816443139],[100.772062535544,13.7273889275443,3.45394824764768]]]},"properties":{"id":"00F6EC280914BA4D4865","name":"อาคารเรียนรวมคณะวิศวกรรมศาสตร์ ห้องบรรยาย(ตึก 12 ชั้น)"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774079313661,13.7265168106938,5.24618728567536],[100.774064501073,13.7268876732572,3.69649383359887],[100.773877640771,13.726882648241,3.39913931522318],[100.773879618486,13.7265106945522,3.9127790933768],[100.774079313661,13.7265168106938,5.24618728567536]]]},"properties":{"id":"0800BE007314BAC6BE56","name":"อาคารโรงปฏิบัติการวิศวกรรมโยธา"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.779705097479,13.7302390134719,3.07674019121489],[100.77970676971,13.7300154986693,3.19812322420355],[100.780132543985,13.730031052739,3.57558880181614],[100.780133900085,13.7301000845203,3.33138085545873],[100.780050291787,13.7301181489363,3.23952642922863],[100.780042956628,13.7302593973759,2.73172759426191],[100.779705097479,13.7302390134719,3.07674019121489]]]},"properties":{"id":"051EDF456014BAD93EF6"}},
{"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.7790325631,13.730037570311,2.69310344055186],[100.779524906652,13.7300499539953,3.07161233550478],[100.779506159736,13.7303364836333,2.62806756216767],[100.779362521778,13.730323504774,2.63213230456668],[100.779234800471,13.7302748729865,2.6361970469657],[100.779121312933,13.7302081354745,2.64432653176372],[100.779059228904,13.7301599018491,2.65245601656174],[100.779031084263,13.7301170732181,2.66058550135977],[100.7790325631,13.730037570311,2.69310344055186]]]},"properties":{"id":"0915671AC814BADBAEDE","name":"อาคารจุฬาภรณ์ 2"}}
]}
    L.geoJSON(a, {
        style: setStyle,
        onEachFeature: onEachFeature
    }).addTo(mymap);
    var  dict =  {};
    
async function changedate(){
    mymap.eachLayer(function (layer) {
    mymap.removeLayer(layer);
    });
    L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(mymap);
    var start = document.getElementById("time_start").value+" "+document.getElementById("hour_sel").value +":00"
    //console.log(start)
    // call php query function
    await jQuery.ajax({
    type: "POST",
    url: 'queryfunc.php',
    dataType: 'json',
    data: {functionname: 'mapquerycn',arguement:[start]},
    success: function (obj) {
        dict = obj;
        console.log(dict);
            },
    error: function(){
        alert("Db is Error")
    }
    });
    L.geoJSON(a, {
        style: setStyle2,
        onEachFeature: onEachFeature
    }).addTo(mymap);
    }

function setStyle(feature) {
    var firstname = JSON.parse('<?php echo json_encode($firstname) ?>');
    var number = JSON.parse('<?php echo json_encode($number) ?>');
    dict = {};
    for (var i = 0 ;i<firstname.length;i++){
        dict[firstname[i]] = number[i];
    }
    if (feature.properties['name'] == "ECC" ){
      if  (dict [feature.properties['name']][0] == 200){
    return {
        "color": "#ff7800"
    }}
    }
    else{
        return {
            "color": "green"
        }
    }
}

function setStyle2(feature) {
    if (feature.properties['name'] in dict){
        numb= dict[feature.properties['name']]
        if(numb > 100){
        return {
        "color": "red"
        }
        }
        else if (numb > 50){
        return {
        "color": "orange"
        }
        }
        else if (numb > 25)
        return {
        "color": "yellow"
        }
        else{
            return {
            "color": "#ff7800"    }
        }
    }
    else{
        return {
            "color":  "#30D6F0"
        }
    }

    
}
async function onEachFeature(feature, layer) {
    var bw = 0;
    var start = document.getElementById("time_start").value+" "+document.getElementById("hour_sel").value +":00"
    await jQuery.ajax({
    type: "POST",
    url: 'queryfunc.php',
    dataType: 'json',
    data: {functionname: 'mapquerybw',arguement:[start,feature.properties['name']]},
    success: function (obj) {
        bw = obj;
        console.log(bw);
        },
    error: function(){
        //alert("Db is Error on bw")
    }
    });
    if (feature.properties['name'] in dict){
        layer.bindPopup(feature.properties['name']+": "+ dict[feature.properties['name']]+' คน' +bw +'Mbs');
    }
    else{
        layer.bindPopup(feature.properties['name']+":"+' 0 คน '+bw +' Mbs');
    }
}

</script>