<html>
<?php
$hostname = "localhost";
$username = "root";
$password = "1439";
$db = "phpserver";

$dbconnect=mysqli_connect($hostname,$username,$password,$db);
if ($dbconnect->connect_error) {
  die("Database connection failed: " . $dbconnect->connect_error);
}

$sql = "SELECT * FROM b WHERE DateTime >= '2020-06-31 12:01:01'";
$result = mysqli_query($dbconnect,$sql);
$firstname = [];
$number = [];
while ($row = mysqli_fetch_array($result)) {
    array_push($firstname,$row[1]);
    array_push($number,[$row[2],$row[3]]);
}

?>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>KMITL Log Analytics - Map</title>.
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
    integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
    crossorigin=""/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <link href="index.css" media="all" rel="Stylesheet" type="text/css" />
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyChO4HEq1x-dXtFFcfCuOHdog9jl6HITdE"></script>
</head>
<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.3.1/leaflet-omnivore.min.js'></script>
 <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
   integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
   crossorigin=""></script>
<body onload ='initalize()'>
    <div class='head_main'>
        <a href="../phpvscode/index.htm"><img src="../img/header.png"></a>
    </div>
        <div class = time  style="margin-top: 30px;">
            <label class = 'gtext'>Time</label>
            <input name = 'time_start'   id ='time_start'  class = 'time_start'  type = 'datetime-local'/>
            <label class = 'text'> : </label>
            <input  name = 'time_stop'  id ='time_stop' class = 'time_stop' type = 'datetime-local' />
            <button class = 'search-bt' id = cf_button onclick = 'changedate()'>Change Time</button>
    </div>
    <div class='body_main'>
        <div id="mapid"  style=" height: 100%;"></div>
        <!-- <div id="capture"></div> -->
    </div>
    <div class='tail_main'></div>
</body>

</html>
<script>
    function initalize(){
        var today = new Date();
        var yesterday = new Date();
        today.setUTCHours(18)
        yesterday.setUTCHours(-6)
        var yester =  yesterday.toISOString().slice(0,19); 
        var dateTime = today.toISOString().slice(0,19);
        console.log(dateTime)
        document.getElementById("time_stop").defaultValue = dateTime;
        document.getElementById("time_stop").max = dateTime;
        document.getElementById("time_start").defaultValue = yester;
        document.getElementById("time_start").max = dateTime;
    }
    var  mymap = L.map('mapid').setView([13.728345,100.778075], 17);
        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(mymap);
    var a ={"type":"FeatureCollection","features":[
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77207168746,13.7275400510618,3.15887942761667],[100.772070461891,13.7272650052332,3.79105003173129],[100.772118739662,13.7272792315861,3.62542592698071],[100.77214879103,13.7270960715047,3.77824529931351],[100.772743835464,13.7271132893373,3.47046515468382],[100.772731380473,13.7272886554887,3.75973043483159],[100.772787986503,13.7272918311286,3.74587330868936],[100.772750660604,13.7275676544212,3.30321218840109],[100.77287461234,13.7275612971717,3.53696870248841],[100.772857606312,13.7276351659691,3.82042493128277],[100.772854835174,13.7277253782565,3.56749562662173],[100.772836157571,13.7278379411887,3.6067339485193],[100.772277421803,13.7278469291773,3.19204476437985],[100.772007184313,13.7278414461612,3.15850278879778],[100.772011370948,13.7277846657005,3.24444504429413],[100.771926534572,13.7277547818231,3.41268083755167],[100.771857932123,13.7277412038568,3.13098061888751],[100.771874669204,13.7275272816696,3.0131719299091],[100.77207168746,13.7275400510618,3.15887942761667]]]},"properties":{"id":"0D5BAABAAA13AEB38432","name":"12th Building"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772521956925,13.7287826469635,2.88313179477638],[100.772532045671,13.7285175527853,2.88400977225583],[100.773341918619,13.7285359578677,2.8829906652082],[100.773324752839,13.7285804847453,2.88306921073123],[100.773381077539,13.7285865865544,2.88309432922819],[100.773345139742,13.7287933587045,3.04231238968404],[100.773292697636,13.728779654138,3.08069631912026],[100.773279570399,13.7288169188782,3.20488570472339],[100.772521956925,13.7287826469635,2.88313179477638]]]},"properties":{"id":"0201DD7CC313AEB44D80","name":"KMITL Fitness Center"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775092384717,13.7294240977101,3.69075357093848],[100.77509679608,13.7292332904671,2.95435696502769],[100.775253994956,13.7292267228761,3.07789720526164],[100.775255729239,13.728955094747,3.42686854014629],[100.775967011462,13.7289784799681,3.74020100432339],[100.77597343342,13.7292249507528,4.1483174377569],[100.775965917456,13.729352902328,3.45440836911251],[100.775852230434,13.7293525656981,3.34391719087982],[100.775845512136,13.7294479870836,2.96272237374524],[100.775092384717,13.7294240977101,3.69075357093848]]]},"properties":{"id":"054811DFE613AED79DD3","name":"ECC"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774751407848,13.7266288499088,7.48247665276759],[100.774759548307,13.7264306182462,3.08434307049413],[100.775633720653,13.7264476318615,2.88905356389952],[100.775747506115,13.7264863448867,2.82626438341831],[100.775743330691,13.7266544210472,3.90436524285414],[100.774751407848,13.7266288499088,7.48247665276759]]]},"properties":{"id":"0975C3E95113AED8A582","name":"HM Building"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772348536266,13.7266009419217,3.13648798515277],[100.772368762353,13.7263647229994,2.88908617013045],[100.772709037234,13.7263681448317,4.32102387361556],[100.772716758103,13.7262617521385,3.56503502539302],[100.772809814372,13.7262687951119,3.78952959734028],[100.772776422958,13.726613308578,3.56273123793927],[100.772348536266,13.7266009419217,3.13648798515277]]]},"properties":{"id":"095914748013AEDA6C40","name":"Agricultural Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.772796387373,13.7263872098532,4.95094257109179],[100.7738746637,13.7264269033176,3.66765254225258],[100.773863113353,13.7266285093623,3.9193497150369],[100.77278035993,13.7265927984537,3.65559982136226],[100.772796387373,13.7263872098532,4.95094257109179]]]},"properties":{"id":"00E00441D613AEDAEAF1","name":"Chemical Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77335767794,13.726921894358,2.36529176284327],[100.773370898906,13.7266894071412,2.94231363457344],[100.773855773862,13.7266951813761,3.89635020717866],[100.773836245452,13.7269708150867,3.02788385310213],[100.77335767794,13.726921894358,2.36529176284327]]]},"properties":{"id":"06E009EEB113AEDB637F","name":"Gymnasium"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773105810614,13.7274289419528,3.23467492225385],[100.773231790647,13.727442270852,3.25392191962395],[100.77322175049,13.727589195812,3.4864102806424],[100.773628971093,13.7275853028145,2.90228071598766],[100.7736243312,13.7277472368627,3.20993067476919],[100.773565496003,13.7278576356298,3.60064419272814],[100.773141805697,13.7278313901264,3.99458458168449],[100.773142797004,13.7276827991122,3.87532497696666],[100.773089929984,13.727674558118,3.73519999306192],[100.773094462636,13.7276225880463,3.6100687253599],[100.773096671747,13.7275675690904,3.48493745765788],[100.773105810614,13.7274289419528,3.23467492225385]]]},"properties":{"id":"0C7E27429213AEE0034E","name":"Industrial Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773664061858,13.7278124288003,3.29242815814604],[100.773665451597,13.7276858266624,2.97046587331924],[100.77372722508,13.7276891516903,2.89280840289892],[100.773766728098,13.7274996901138,2.64493650728706],[100.773801642251,13.7274676734743,2.68456737148081],[100.773910830105,13.7274770527952,2.84232746841893],[100.773905025607,13.7275120991921,2.80031101472779],[100.774297387756,13.7275353157465,3.40339574186127],[100.77429519661,13.7278245753076,3.32640020664631],[100.773664061858,13.7278124288003,3.29242815814604]]]},"properties":{"id":"081FD9E08013AEE12A8D","name":"Mechanical Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773705734346,13.7247946471715,3.35265271688716],[100.773714292902,13.7250357904751,3.70156952131999],[100.773090568308,13.7250432087637,3.3840744768649],[100.773087044489,13.7248029576154,4.36569913775181],[100.773705734346,13.7247946471715,3.35265271688716]]]},"properties":{"id":"0B56B6F8BB13AEE7C2B1","name":"Fine ARts Buildings"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.771855606532,13.7269810095927,3.33554672903819],[100.771860696014,13.7267124769921,3.45540865992179],[100.772048616395,13.7267094083712,3.35645600900886],[100.772051023187,13.7266795163318,3.3526757742414],[100.772349685379,13.7266800979585,3.11088299626474],[100.772333966187,13.726981867226,3.33639570198153],[100.771855606532,13.7269810095927,3.33554672903819]]]},"properties":{"id":"08D081FA4313AEE8EC17","name":"C Food Court"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.778150788468,13.7271753321572,2.8021179394685],[100.778405890544,13.7271658951278,3.50936122220647],[100.778396558263,13.7273209269897,3.46418132610818],[100.778614783228,13.7273282128022,3.69527523424874],[100.778593693504,13.7274562293872,3.77222766371235],[100.778791305772,13.7274604685275,4.52596898787724],[100.778800434764,13.7274098330985,4.64571170351102],[100.778967849576,13.7274008761195,4.77461424064627],[100.779046305635,13.7274455976292,4.62767724089336],[100.779048556646,13.7274668101834,4.53195378383048],[100.779110701105,13.7274717993152,4.25301836389875],[100.77909045559,13.7279674300233,2.92112846704282],[100.778665468279,13.7279744532677,3.73047844276226],[100.77867444947,13.7280616107679,3.70259062726581],[100.778339947531,13.7280304503436,4.3629853413381],[100.77817470745,13.7278903374915,3.1854198598314],[100.778150788468,13.7271753321572,2.8021179394685]]]},"properties":{"id":"01269109C113AEEA4F75","name":"KMITL Library"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776716487,13.7291610844858,6.24402489092634],[100.776725679953,13.7292629515462,6.52176487637547],[100.7767069975,13.7293863832983,6.3332208476416],[100.776460852247,13.7293799777286,4.76363615316787],[100.776433044712,13.7292900490473,4.77106979805921],[100.776440342165,13.7291686669624,4.55353521418258],[100.776461461256,13.7291669688118,4.72964623765833],[100.776716487,13.7291610844858,6.24402489092634]]]},"properties":{"id":"0F4454C57A13AF6D29BF","name":"Automation Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774575377957,13.7305202195622,2.95786680390026],[100.77500675478,13.7305260670475,2.74350303982218],[100.774988890665,13.7312817527601,2.87093366500648],[100.774844902138,13.7312761265237,2.75264276907245],[100.774852686688,13.7311967570812,3.07422186667293],[100.774762425536,13.7312073059308,2.86414886699351],[100.774757034575,13.731250037386,2.73450091625092],[100.774693775141,13.7312466248717,2.73447633814965],[100.774702914518,13.7312007995645,2.87583989765456],[100.774583697759,13.7311880274746,2.75466125165185],[100.774575377957,13.7305202195622,2.95786680390026]]]},"properties":{"id":"0FB1D3604713AF6E4247","name":"KMITL Alumi Assocaition"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775162764872,13.7298301479406,3.39770347822105],[100.775647497919,13.729829948922,3.69691153966077],[100.775639787836,13.7301200301236,2.63855629164279],[100.775120324991,13.7301046370281,5.90001643687023],[100.775162764872,13.7298301479406,3.39770347822105]]]},"properties":{"id":"05D724FC0513AF6F9AEC","name":"College of Advanced Manufacturing Innovation"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777406202675,13.7300975920555,3.1151753535575],[100.776876411301,13.7300868190222,3.05863844261447],[100.7768879991,13.730270747724,3.04450421487871],[100.777661679729,13.7303022033786,3.03743710101084],[100.777652327342,13.7304058447269,3.03036998714296],[100.776881495155,13.7303892345768,3.00210153167144],[100.776078145318,13.7303684605707,2.94556462072842],[100.77609039296,13.730252628268,2.93143039299266],[100.776798219945,13.7302672686572,2.92436327912478],[100.776792886362,13.7300844693772,2.9172961652569],[100.776312539025,13.7300668695762,2.88902770978539],[100.776320376748,13.7297897319552,2.76074432747327],[100.776775011947,13.7297970925911,3.66172525741533],[100.776771578527,13.7298970514503,3.7372438869705],[100.776897324755,13.7299000727231,3.6762035966941],[100.776902721357,13.7298014251864,3.67276767602964],[100.777412324971,13.7298160955949,3.13209369536966],[100.777406202675,13.7300975920555,3.1151753535575]]]},"properties":{"id":"0272AD484713AF717B5E","name":"KMITL Sirindhorn Building (ตึกพระเทพ)"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777650221581,13.7295493699958,2.91493932088448],[100.777157117547,13.7295458862801,4.17152793476517],[100.777176415471,13.7293471199631,4.30368653133821],[100.777639703725,13.7293498340725,2.92374371904909],[100.777650221581,13.7295493699958,2.91493932088448]]]},"properties":{"id":"01460E152813AF750088","name":"KMITL Hospital"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777334051319,13.7307106120844,3.81626499356799],[100.778108569886,13.7307177533855,2.6206744865631],[100.778109813543,13.7309691142864,2.34537004891954],[100.777519216731,13.7309813464749,3.95056479488364],[100.777510820285,13.7310962520281,4.02691102770345],[100.777397691476,13.7310888227787,3.7200358647765],[100.777397252519,13.730972206734,3.81627982757109],[100.777307017965,13.730949108856,3.74372204721128],[100.777334051319,13.7307106120844,3.81626499356799]]]},"properties":{"id":"09118DC64613AF777634","name":"KMITL President Building"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77518095362,13.7303208064194,2.9314896362572],[100.775929865828,13.7303383056868,3.1981221589733],[100.775916117084,13.7306292012513,2.74462842091609],[100.775155735089,13.7306005703135,2.73452546040064],[100.77518095362,13.7303208064194,2.9314896362572]]]},"properties":{"id":"05A1A66B4E13AF79F51C","name":"KMITL Swimming Pool"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775479188712,13.727423749793,3.81629636339622],[100.775701558522,13.7274300275147,3.71911211351881],[100.775694962729,13.7275958241324,3.31859787750402],[100.775663848232,13.7275954487568,3.32039116786347],[100.775650834653,13.7277966877587,2.78826571932692],[100.775274796351,13.7277859540302,3.02769710395241],[100.775279303218,13.7276477439209,3.36584157727245],[100.775000694247,13.7276340852972,4.18022774231509],[100.775002181392,13.7275779004811,4.35815426754479],[100.774911493619,13.7275753574222,4.65310756031434],[100.774912623033,13.7274627909885,4.68847426681652],[100.774981990286,13.7274683748029,4.66328076095208],[100.774998926626,13.7273380913925,4.70728432739439],[100.775283108266,13.7273552416667,3.72676372602073],[100.775278602778,13.7272738002849,3.8713674344129],[100.775485589201,13.7272793434335,3.97081143656871],[100.775479188712,13.727423749793,3.81629636339622]]]},"properties":{"id":"0594A06D6013AF7B5443","name":"Biomedical engineering"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775848876214,13.727356248947,3.75777280901164],[100.77640406141,13.7273649210429,3.16611177652881],[100.776401557201,13.7275846343796,3.47392674697277],[100.775850861499,13.7275733209145,3.37117486256439],[100.775848876214,13.727356248947,3.75777280901164]]]},"properties":{"id":"0FE607B19513AF7C8635","name":"Telecommuncation Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774865347525,13.7258541818601,3.67775709283283],[100.774833846082,13.725855696738,3.60292753568324],[100.774837856935,13.7257780015193,3.50721943038478],[100.774808173615,13.7257785898608,3.50722040366287],[100.774816261507,13.7255515043523,3.30745063202873],[100.77484975478,13.725557045231,3.41894358786617],[100.774845242035,13.7254800628206,3.3526853584843],[100.775157792667,13.7254944103806,6.08326325809027],[100.775150528397,13.7255187291172,6.02114951280407],[100.77523457881,13.7255389436195,6.77881248989286],[100.775310973534,13.7256817643598,6.40336639360144],[100.775257910227,13.7257863774081,5.10548170177494],[100.775128062212,13.725829111741,4.53353176328904],[100.775107080509,13.7258298043813,4.43705542893387],[100.775100910443,13.7258605997361,4.26185016663213],[100.774865347525,13.7258541818601,3.67775709283283]]]},"properties":{"id":"087718267613AF7FC453","name":"ฺีConvention Hall of Architecture"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774883743656,13.7249911245702,3.71086121351587],[100.77546961851,13.7250242062407,4.60799286960468],[100.775444842781,13.7254061202974,5.71127768178431],[100.774835345601,13.7253897356856,3.44539149217311],[100.774883743656,13.7249911245702,3.71086121351587]]]},"properties":{"id":"05974336E113AF819BB2","name":"Buiding of Architecture"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.7802697487,13.7261648574207,3.04736063464089],[100.780509799769,13.7258838008155,3.53308499326385],[100.780625399798,13.7259024694349,4.33522949839073],[100.78077747527,13.7260949756561,3.5072027148993],[100.780975259199,13.7261018091919,3.82835734017459],[100.78132062064,13.7258293601795,3.09880608205752],[100.781396447009,13.7258622180671,3.39014786800339],[100.781599039656,13.7260770692415,3.1379736899256],[100.781590337823,13.7261707668135,2.95282146604588],[100.781306227441,13.7264088733627,2.90459615731491],[100.78131834767,13.7266934129955,3.31098919958099],[100.781584211866,13.7269644895092,3.04523968624869],[100.781583382169,13.7270730220787,3.10976142198966],[100.781356233324,13.7272596514931,4.7956439439765],[100.781247213797,13.7272613638492,4.54204763401026],[100.780938190928,13.7269902720523,3.88533483947102],[100.780735501527,13.7269987061105,3.87943653370621],[100.780546175165,13.7271713415354,3.80581443130666],[100.780290304639,13.7269123731524,2.88909036314831],[100.780457995119,13.7267015060217,3.04361522568771],[100.780452585362,13.7266636622127,3.08322175227042],[100.780139358294,13.7266653134002,2.42061012571717],[100.780168687442,13.7263716415335,3.19811619481566],[100.780430993374,13.7263462017429,3.19815171522229],[100.7802697487,13.7261648574207,3.04736063464089]]]},"properties":{"id":"0C0667E09E13AF83FB55","name":"Building of Faculty of Agricultural Technology"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.778743042053,13.726586729466,3.50129197861902],[100.778751861438,13.7264674218083,3.48190675453926],[100.778474281689,13.7264685877595,3.7123568943892],[100.778458667021,13.7263238687871,3.7708381720064],[100.778739325947,13.7263397897182,3.31374268537017],[100.778756958031,13.726120888434,2.88310203623266],[100.779229925491,13.7261208752748,2.88308956044844],[100.779260709307,13.7260386939162,2.88312803181163],[100.779386202488,13.7260297879422,2.88308882624592],[100.779373519495,13.7261173395682,2.88305294793324],[100.78007408182,13.7261263963351,2.9952172237535],[100.780014948146,13.7265958238641,2.60907212323437],[100.779882879781,13.7265933284324,2.85541229414636],[100.779868554277,13.7269630017796,2.88307896190264],[100.779826824076,13.7269698452801,2.88308848390101],[100.779820352141,13.7270659679714,2.88296696135964],[100.779045527897,13.7270613333221,3.61901462585254],[100.779037785014,13.7271079765227,3.62777244530398],[100.778883763114,13.7271109592314,4.77661250365611],[100.778867293549,13.727056391602,4.66232328447658],[100.778582710792,13.7270521680701,4.03133001017436],[100.778505347166,13.7269700529682,3.73948088038547],[100.778465917829,13.7269536342159,3.66256510021791],[100.778496111388,13.7266334699046,3.50112312052759],[100.778743042053,13.726586729466,3.50129197861902]]]},"properties":{"id":"0B490B99F613AF871B6F","name":"Meeting Hall"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774536131556,13.7296837718785,4.49126214553516],[100.775063152948,13.7296959530592,3.02754591199018],[100.775063765098,13.729849572936,3.22055181957834],[100.774527581569,13.7298551196278,3.68581172451698],[100.774536131556,13.7296837718785,4.49126214553516]]]},"properties":{"id":"0E7B6DEC5513B0FE1484","name":"dorm building 7"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774486418774,13.7294096687972,3.31983788897231],[100.77506175983,13.7294197212564,4.11751776233912],[100.775101330138,13.7295055354829,3.16880088874262],[100.775064729565,13.7295703087941,3.0471347251942],[100.774468132927,13.7295620206642,4.6768580668118],[100.774486418774,13.7294096687972,3.31983788897231]]]},"properties":{"id":"0783A5051913B0FE8D6A","name":"dorm building 8"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775155276759,13.7285815651861,3.45251127185359],[100.775359190868,13.7285962522844,3.56346490855026],[100.775357089061,13.7288985457293,3.3571958078767],[100.775142951902,13.7288984844563,3.28563669006587],[100.775155276759,13.7285815651861,3.45251127185359]]]},"properties":{"id":"06E6B3252E13B0FFDF6C","name":"L food court"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777177885097,13.7271503022069,3.5201962802439],[100.777547276171,13.7271702243306,3.52067560697538],[100.777530047934,13.7274901488064,3.55780949225687],[100.777158889475,13.7274760944857,3.52040034327537],[100.777177885097,13.7271503022069,3.5201962802439]]]},"properties":{"id":"023EDCC86413B1038C56","name":"Engineering auditorium"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775449372361,13.7270461534462,5.51274218946315],[100.775472328085,13.7268031292808,9.59098642496465],[100.77590544011,13.72682864672,4.24795737861843],[100.775861694986,13.7270562685151,4.82708502097813],[100.775449372361,13.7270461534462,5.51274218946315]]]},"properties":{"id":"0A100BEE1F13B105BE09","name":"A food court"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774122219066,13.7270036912584,3.36196280941475],[100.77414661616,13.7268177739304,3.81606339061008],[100.774475265714,13.7268346658857,3.63598663376634],[100.774459407363,13.7270162265257,3.07000413632713],[100.774122219066,13.7270036912584,3.36196280941475]]]},"properties":{"id":"00F67C237013B10AD15C","name":"Civil Engineering Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.777321446261,13.729094316624,4.049218659323],[100.77733547235,13.7290402399401,4.0544343604547],[100.777242636921,13.7290398944072,4.58655308941136],[100.777247091188,13.7289480647406,4.19585913462511],[100.777087195655,13.7289330598695,5.53005132506607],[100.777085849635,13.72882393121,5.07471984415279],[100.777316251571,13.7288237115663,3.51076965463983],[100.777316006108,13.7289268864801,3.71181206802222],[100.7775604058,13.728928979558,2.93453479991175],[100.777550557125,13.7290958728028,3.13754597947022],[100.777321446261,13.729094316624,4.049218659323]]]},"properties":{"id":"0C1748624913B1126DA8","name":"Research Nanotechnology KMITL"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780199740247,13.731366130313,2.6620679970027],[100.780205405969,13.7313123115982,2.82738237155969],[100.779818584218,13.7313241221139,3.08490717427484],[100.779825004133,13.7311274462074,3.38325195360266],[100.780017659711,13.7311246479908,3.3592320471228],[100.78001966888,13.7309713402176,3.5343369641697],[100.780421898965,13.7309519082383,3.76847607981891],[100.780429205517,13.7310828876668,3.70783545883734],[100.780581885699,13.7310763184659,3.84134858266652],[100.780573975642,13.7313475147268,3.0586389331438],[100.780199740247,13.731366130313,2.6620679970027]]]},"properties":{"id":"02382D31F713B116F5D3","name":"Administration and Management"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780760711117,13.7311728400438,4.41752692926432],[100.780760796054,13.7307580362704,3.57284125189165],[100.781554728295,13.7307547579756,3.74845544943522],[100.781553881853,13.7309964454778,4.08384179691934],[100.78181055189,13.7309866859579,3.51491560996984],[100.781818293968,13.7311276348254,3.64934008990744],[100.780760711117,13.7311728400438,4.41752692926432]]]},"properties":{"id":"0122FEA98B13B118C104","name":"Inforrmation Technology"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776181627475,13.7270481121814,3.5205924270642],[100.776194134662,13.7268583215499,3.52052552268285],[100.776799546317,13.7268730819856,3.25678815571978],[100.776770711982,13.7270499722583,2.97383173918036],[100.776181627475,13.7270481121814,3.5205924270642]]]},"properties":{"id":"0FA230591213B1217BF8","name":"Faculty of Engineering (Dean) Office"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77433906365,13.7287730836756,4.09160695193102],[100.774176044244,13.7287696090642,3.78632490237119],[100.774171924505,13.72886731251,3.76152506203377],[100.7743322276,13.7288670239223,4.523489249285],[100.774329608476,13.7289539679503,4.32059604432972],[100.774063395082,13.7289529409696,3.43044847201771],[100.774075975815,13.7286804226392,3.6617329205657],[100.774342320108,13.7286861655262,3.85578296316096],[100.77433906365,13.7287730836756,4.09160695193102]]]},"properties":{"id":"00EBC1333213B3AB0B93","name":"Dorm Building 1"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773642283144,13.728680525489,3.35953726600265],[100.773894757361,13.72868363399,3.59380210569898],[100.773876260025,13.7289422462208,3.54479210423324],[100.773624061137,13.7289371889513,3.6830368690491],[100.773636045533,13.7288492170116,3.39691411856121],[100.773804309677,13.7288570338199,3.66175481366432],[100.773804933972,13.7287677402434,3.62888746975697],[100.773631144095,13.7287669696558,3.19149252242596],[100.773642283144,13.728680525489,3.35953726600265]]]},"properties":{"id":"0E031AFD7C13B3AC749E","name":"Dorm Building 2"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774350109157,13.7290975204548,3.21899322363214],[100.774178278544,13.7290985610044,3.42412492011504],[100.774175090372,13.7292165177324,3.31053347484338],[100.77434730735,13.7292219753145,2.85925812898935],[100.774340121964,13.7292893048101,2.86943818784252],[100.774180452096,13.7292866964937,3.29950796410673],[100.774180410593,13.7293961357204,3.56052275817743],[100.77434636416,13.7294024849637,3.39804512429716],[100.774342535965,13.7294766187003,3.95360039834432],[100.774087384326,13.7294729265366,3.65313760177578],[100.774084628259,13.7290358252996,3.43000636327094],[100.77434748264,13.729036592548,3.51628277852407],[100.774350109157,13.7290975204548,3.21899322363214]]]},"properties":{"id":"0CE27B559113B3AE0347","name":"Dorm Building 4"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773907565381,13.7290183509475,3.50719338104917],[100.77389397561,13.7294664908181,3.21761169356737],[100.773649149913,13.7294630189516,3.07355399984684],[100.773648211051,13.7293980024308,3.10489069984569],[100.773815883022,13.7294010788317,3.19812685419134],[100.773819066051,13.7292787885018,3.45061796302307],[100.773655917665,13.7292738536804,3.34038590593752],[100.77365989474,13.7292090540666,3.49029011231569],[100.77382195181,13.7292139059244,3.50721660674657],[100.773828775167,13.7290818445454,3.60650542197308],[100.773658219462,13.7290850140977,3.92700459396198],[100.773657937848,13.7290193775666,3.86743870258841],[100.773907565381,13.7290183509475,3.50719338104917]]]},"properties":{"id":"0CAE15FB7513B3AF4BFC","name":"Dorm Building 3"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.774339138211,13.7296306273434,3.56892837403176],[100.774187182063,13.7296296669478,3.51192083609124],[100.774180787069,13.7297471289838,3.2325882026943],[100.774330230233,13.7297472586102,3.18640748387893],[100.774330106746,13.7298181070016,3.34737515035169],[100.774171698688,13.7298170042083,3.31179861895512],[100.774172783151,13.7299276230286,3.48502870813818],[100.774327646007,13.7299293547819,3.35263309429922],[100.774326587668,13.7299992123273,3.35310087467048],[100.774081059168,13.7299939343092,3.69824974470368],[100.774089527265,13.7295649943209,3.56647172250138],[100.77434261524,13.7295578845851,4.47938576339701],[100.774339138211,13.7296306273434,3.56892837403176]]]},"properties":{"id":"0313980BEF13B3B018F8","name":"Dorm Building 5"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773900817186,13.7295454875136,3.24609799445921],[100.773882508371,13.7299847512261,3.73137615175758],[100.773649544753,13.7299847420305,3.35747645148458],[100.773650536018,13.7299149807203,3.24687937691673],[100.773810589278,13.7299164915818,3.50546174814016],[100.773817534819,13.7298051273675,3.35269466970006],[100.773647162994,13.729803286469,2.95598813243673],[100.77365041024,13.7297341054096,2.90445567848501],[100.773818386398,13.7297355109037,3.2104975144799],[100.77382556534,13.7296174729803,3.09385093935572],[100.77364565104,13.7296150760127,2.88905635500081],[100.773646952303,13.7295483194812,2.89151743579533],[100.773900817186,13.7295454875136,3.24609799445921]]]},"properties":{"id":"0B876816B113B3B0FF3B","name":"Dorm Building 6"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.773335930812,13.7256376660626,4.48003082326162],[100.773527013862,13.7256361419314,3.52788199284546],[100.773528530332,13.7255946181057,3.67118706249576],[100.774368565394,13.7256254435133,3.81622944769768],[100.77436090269,13.72565273613,3.81623479789792],[100.774497422002,13.7256582455595,3.81629949967172],[100.774494238612,13.7257484172958,3.81233563646891],[100.774461559767,13.7257496349158,3.77874773432659],[100.774443149424,13.7258958402407,3.57016511200366],[100.774066856179,13.7258741903415,3.14316458802693],[100.774055146809,13.7259110242799,3.11154772257138],[100.773862339021,13.7259049529512,3.2460396614325],[100.773867217465,13.7258657194893,3.19815991452441],[100.773438018753,13.7258665678948,3.19812859703817],[100.773458474914,13.7257185008478,3.47425574043361],[100.773328077142,13.7257240233302,4.03482276150893],[100.773335930812,13.7256376660626,4.48003082326162]]]},"properties":{"id":"0BD491BD7913B3B47155","name":"อาคารบูรณาการ คณะสถาปัตยกรรมศาสตร์"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.781423154332,13.7296504607017,2.78851975622772],[100.78206567317,13.7296531619736,3.6963220075751],[100.78207326231,13.7290701832071,3.12460918962445],[100.782332694052,13.7290712981008,3.35266978037614],[100.782326728988,13.7295041060988,4.17437089848019],[100.782170237688,13.7295204287572,3.8865647871306],[100.782163974775,13.7295881574684,3.9209804424903],[100.782213289112,13.7295925681038,4.0912275559624],[100.782208712473,13.7296355231916,4.07598237539699],[100.782414367319,13.7296364262351,4.09711210427153],[100.782404308436,13.7298221283963,3.47875111674732],[100.781428549546,13.7298254721878,3.33046176122357],[100.781423154332,13.7296504607017,2.78851975622772]]]},"properties":{"id":"0312E1EF7813B3BA931C","name":"อาคาร บุณณาค"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.779237782289,13.7296361824751,3.6421691339065],[100.779499227216,13.7296384017254,3.35262937518858],[100.779509581684,13.7299728741064,3.19811252663236],[100.779229534412,13.7299751872236,3.06891663668803],[100.779237782289,13.7296361824751,3.6421691339065]]]},"properties":{"id":"07E0391FEC13B3C0CA5B","name":"Chulaporn Walailak Auditorium"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.779959816137,13.7292437569099,2.96819511790559],[100.78035911868,13.7292432917055,3.38679587418446],[100.780343504078,13.7298476304815,3.83854272234968],[100.779681789869,13.7298540717955,3.19818462560263],[100.779683503536,13.7296136419479,3.19588396452185],[100.779950861498,13.7294104609006,2.9713882325629],[100.779959816137,13.7292437569099,2.96819511790559]]]},"properties":{"id":"029518C92613B3C177DB","name":"Chulaphon Walailak 1 Building"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775867067571,13.7311392098017,2.12489786276468],[100.775870429806,13.7308327822811,2.22263999762844],[100.776701168445,13.7308452799578,3.03368314055229],[100.776688217204,13.731183455219,2.64858411735251],[100.775867067571,13.7311392098017,2.12489786276468]]]},"properties":{"id":"0B7FD78212140F99E864","name":"KMIDS"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.775402300817,13.731146649672,3.01725685164861],[100.775307776557,13.7311468380898,2.88905497006003],[100.775315009595,13.7309476531281,3.0114742641228],[100.775416567113,13.7309493539576,3.04358297170422],[100.775416656016,13.7308419764407,3.19806441302568],[100.775616063835,13.7308490163687,3.01104845212557],[100.775608942587,13.7309769738858,3.1086279575948],[100.775705140866,13.730973644761,2.97694768193824],[100.775697955298,13.731128982922,3.27176856786164],[100.775619630591,13.7311272431714,3.27924430986002],[100.775617850963,13.7312672641925,3.30369130293531],[100.775400420618,13.7312576816692,2.85799981480008],[100.775402300817,13.731146649672,3.01725685164861]]]},"properties":{"id":"0D2CEE2ACC140F9A89B6","name":"Medicine Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.776800978205,13.7287086572089,4.06097850131144],[100.776928077261,13.7287143289183,4.54263788615196],[100.776928636483,13.7286520965531,3.63247859008258],[100.777045181436,13.7286548819344,3.39899709637574],[100.777034541486,13.7288917916047,5.79735720627335],[100.776932912608,13.7288860938729,6.10203036852812],[100.776927390068,13.7294916487991,5.66314304635709],[100.776779936657,13.7294929894054,4.5879003736677],[100.776791401924,13.7288214953932,4.98065349066269],[100.776690059135,13.7288216184672,3.86252809867679],[100.776693128488,13.7286435206039,3.11491343706512],[100.776806584382,13.7286435625208,3.33532690116496],[100.776800978205,13.7287086572089,4.06097850131144]]]},"properties":{"id":"08B9431A0A140F9B53E4","name":"Plaza Avenue"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780924298637,13.7300491014539,3.67580327666102],[100.780917470555,13.7303077099929,3.31517717279773],[100.78039633258,13.730300907255,3.37677313413573],[100.780323939259,13.7302571353543,3.50140219246109],[100.780334654412,13.729968236762,4.07280842498154],[100.780389782382,13.7299649576743,4.00886274962954],[100.780386219799,13.7298412142428,3.80375125149647],[100.780610335362,13.7298481973192,3.50116869484039],[100.780758710116,13.7298615570638,3.55165239071405],[100.780755267421,13.7300489794148,3.7762625578259],[100.780924298637,13.7300491014539,3.67580327666102]]]},"properties":{"id":"073050A895140F9D6A1A","name":"Industrial Education and Technology Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780429912553,13.7297680032136,3.93691430077438],[100.78043749604,13.729396039809,3.90830072113683],[100.780748490339,13.7294071390521,3.70859731348836],[100.780767604068,13.7292376665009,3.43040170515631],[100.78126186499,13.7292524214231,2.64006462796069],[100.781241505744,13.7297829133705,3.71977913438515],[100.780429912553,13.7297680032136,3.93691430077438]]]},"properties":{"id":"0AFD162160140F9EC74A","name":"อาคารปฏิบัติการพิเศษจอมไตรณะครุศาสตร์อุตสาหกรรมและเทคโนโลยี"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.77836248141,13.7291105342701,2.94633613495237],[100.778371796321,13.7288598469716,2.93026993489597],[100.778530999715,13.7288644830584,3.36747043031672],[100.778532219979,13.7289063661056,3.43011287780745],[100.778734779772,13.7289086350512,4.43978678537815],[100.778733640777,13.7289954012312,4.27506168544082],[100.77849725516,13.7289912427427,3.41258137079348],[100.77849491007,13.7291236657945,3.39845743771936],[100.77836248141,13.7291105342701,2.94633613495237]]]},"properties":{"id":"0074416C80140FA0886A","name":"อาคารกิจกรรมนักศึกษา"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.780802536206,13.7276863059773,3.00768976560507],[100.780809889963,13.7273650638663,3.87492922341861],[100.781139891361,13.7273684604922,4.04640006434128],[100.781125753313,13.7277030403669,3.6962770472197],[100.780802536206,13.7276863059773,3.00768976560507]]]},"properties":{"id":"0A1D7EFEB3140FA37146","name":"Food Industry Department"}},
    {"type":"Feature","geometry":{"type":"Polygon","coordinates":[[[100.771048476126,13.725722596068,6.21894926629829],[100.771053423639,13.7255141846148,5.17548646192617],[100.771747125512,13.7255257622935,3.40848683227416],[100.771733653304,13.7257337976325,3.6655977343316],[100.771048476126,13.725722596068,6.21894926629829]]]},"properties":{"id":"02DEC5123F140FA46859","name":"คอนโดพนักงานเจ้าหน้าที่"}}
    ]}
    L.geoJSON(a, {
        style: setStyle,
        onEachFeature: onEachFeature
    }).addTo(mymap);
    var  dict =  {};
    
async function changedate(){
    mymap.eachLayer(function (layer) {
    mymap.removeLayer(layer);
    });
    L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',{
            maxZoom: 20,
            subdomains:['mt0','mt1','mt2','mt3']
        }).addTo(mymap);
    var start = document.getElementById("time_start").value 
    var stop = document.getElementById("time_stop").value
    // call php query function
    await jQuery.ajax({
    type: "POST",
    url: 'queryfunc.php',
    dataType: 'json',
    data: {functionname: 'mapquery',arguement:[start,stop]},
    success: function (obj) {
        dict = obj;
        console.log(dict);
            },
    error: function(){
        alert("Nobody at that time")
    }
    });
    L.geoJSON(a, {
        style: setStyle2,
        onEachFeature: onEachFeature
    }).addTo(mymap);
    }

function setStyle(feature) {
    var firstname = JSON.parse('<?php echo json_encode($firstname) ?>');
    var number = JSON.parse('<?php echo json_encode($number) ?>');
    dict = {};
    for (var i = 0 ;i<firstname.length;i++){
        dict[firstname[i]] = number[i];
    }
    if (feature.properties['name'] == "ECC" ){
      if  (dict [feature.properties['name']][0] == 200){
    return {
        "color": "#ff7800"
    }}
    }
    else{
        return {
            "color": "green"
        }
    }
}

function setStyle2(feature) {
    if (feature.properties['name'] == "ECC" ){
      if  (dict [feature.properties['name']][0] == 200){
    return {
        "color": "#ff7800"
    }}
    }
    else{
        return {
            "color": "blue"
        }
    }
    
}
function onEachFeature(feature, layer) {
    var number = JSON.parse('<?php echo json_encode($number) ?>');
    layer.bindPopup(feature.properties['name'],);
}

</script>